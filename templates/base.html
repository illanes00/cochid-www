<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="{% block meta_description %}COCHID — Corporación Chilena de Inteligencia de Datos. Transformamos datos complejos en ventaja competitiva.{% endblock %}">
  <title>{% block title %}COCHID — Corporación Chilena de Inteligencia de Datos{% endblock %}</title>

  <!-- OG Tags -->
  <meta property="og:title" content="{% block og_title %}COCHID — Inteligencia de Datos{% endblock %}">
  <meta property="og:description" content="Corporación Chilena de Inteligencia de Datos. Plataformas de datos, inteligencia periodística e ingeniería a medida.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://cochid.cl">
  <meta property="og:locale" content="es_CL">

  <!-- SVG Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><circle cx='8' cy='16' r='3' fill='%232d7aff'/><circle cx='24' cy='8' r='3' fill='%2300d4aa'/><circle cx='24' cy='24' r='3' fill='%232d7aff'/><line x1='10.5' y1='14.8' x2='21.5' y2='9.2' stroke='%232d7aff' stroke-width='1.5' opacity='0.6'/><line x1='10.5' y1='17.2' x2='21.5' y2='22.8' stroke='%2300d4aa' stroke-width='1.5' opacity='0.6'/><line x1='24' y1='11' x2='24' y2='21' stroke='%232d7aff' stroke-width='1.5' opacity='0.4'/></svg>">

  <!-- Anti-FOUC -->
  <script>
    (function() {
      var s = localStorage.getItem('theme');
      if (s === 'dark' || (!s && window.matchMedia('(prefers-color-scheme: dark)').matches) || s === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.classList.add('dark');
      }
    })();
  </script>

  <!-- Fonts: Outfit (display) + JetBrains Mono (data) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Tailwind CSS (Play CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            cochid: {
              electric: '#2d7aff',
              'electric-hover': '#1a6aef',
              cyan: '#00d4aa',
              'cyan-hover': '#00b894',
              amber: '#f59e0b',
              navy: '#0a0f1e',
              'navy-light': '#111827',
              surface: '#151c2c',
              'surface-light': '#1e2740',
              'surface-border': 'rgba(45,122,255,0.15)',
              'glow': 'rgba(45,122,255,0.08)',
              'glow-cyan': 'rgba(0,212,170,0.08)',
            },
            light: {
              bg: '#f8fafc',
              surface: '#ffffff',
              'surface-alt': '#f1f5f9',
              ink: '#0f172a',
              muted: '#64748b',
              line: '#e2e8f0',
            }
          },
          fontFamily: {
            display: ['Outfit', 'system-ui', 'sans-serif'],
            mono: ['JetBrains Mono', 'monospace']
          }
        }
      }
    }
  </script>

  <style type="text/tailwindcss">
    /* ═══ BASE ═══ */
    html { scroll-behavior: smooth; }
    body { @apply font-display; }
    section[id], div[id] { scroll-margin-top: 80px; }

    /* ═══ ANIMATIONS ═══ */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(24px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to   { opacity: 1; }
    }
    @keyframes pulse-glow {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 1; }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }
    @keyframes network-drift {
      0%, 100% { transform: translate(0, 0); }
      25% { transform: translate(4px, -3px); }
      50% { transform: translate(-2px, 5px); }
      75% { transform: translate(3px, 2px); }
    }
    @keyframes dash-flow {
      to { stroke-dashoffset: -20; }
    }

    .animate-fade-in-up {
      animation: fadeInUp 0.7s cubic-bezier(0.16,1,0.3,1) both;
    }
    .animate-fade-in-up-d1 { animation: fadeInUp 0.7s cubic-bezier(0.16,1,0.3,1) 0.1s both; }
    .animate-fade-in-up-d2 { animation: fadeInUp 0.7s cubic-bezier(0.16,1,0.3,1) 0.2s both; }
    .animate-fade-in-up-d3 { animation: fadeInUp 0.7s cubic-bezier(0.16,1,0.3,1) 0.3s both; }
    .animate-fade-in-up-d4 { animation: fadeInUp 0.7s cubic-bezier(0.16,1,0.3,1) 0.4s both; }
    .animate-fade-in { animation: fadeIn 0.6s ease both; }
    .animate-float { animation: float 6s ease-in-out infinite; }
    .animate-network { animation: network-drift 12s ease-in-out infinite; }

    /* ═══ SCROLL REVEAL ═══ */
    .reveal {
      opacity: 0; transform: translateY(20px);
      transition: opacity 0.6s cubic-bezier(0.16,1,0.3,1), transform 0.6s cubic-bezier(0.16,1,0.3,1);
    }
    .reveal.visible { opacity: 1; transform: translateY(0); }

    /* ═══ CARDS ═══ */
    .glass-card {
      @apply rounded-xl border transition-all duration-300;
      /* Light mode */
      @apply bg-white/80 border-gray-200/80 shadow-sm;
      @apply hover:shadow-lg hover:-translate-y-1 hover:border-cochid-electric/30;
      backdrop-filter: blur(12px);
    }
    .dark .glass-card {
      @apply bg-cochid-surface/80 border-cochid-surface-border;
      @apply hover:border-cochid-electric/40 hover:shadow-[0_8px_32px_rgba(45,122,255,0.12)];
    }

    /* ═══ NETWORK BACKGROUND ═══ */
    .network-bg {
      position: relative;
      overflow: hidden;
    }
    .network-bg::before {
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 20% 50%, rgba(45,122,255,0.06) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(0,212,170,0.04) 0%, transparent 50%),
        radial-gradient(circle at 60% 80%, rgba(245,158,11,0.03) 0%, transparent 50%);
      pointer-events: none;
    }
    .dark .network-bg::before {
      background:
        radial-gradient(circle at 20% 50%, rgba(45,122,255,0.12) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(0,212,170,0.08) 0%, transparent 50%),
        radial-gradient(circle at 60% 80%, rgba(245,158,11,0.04) 0%, transparent 50%);
    }

    /* ═══ GRADIENT TEXT ═══ */
    .gradient-text {
      @apply bg-clip-text text-transparent;
      background-image: linear-gradient(135deg, #2d7aff 0%, #00d4aa 100%);
    }

    /* ═══ SECTION DIVIDER ═══ */
    .section-divider {
      @apply h-px;
      background: linear-gradient(90deg, transparent 0%, rgba(45,122,255,0.3) 50%, transparent 100%);
    }
    .dark .section-divider {
      background: linear-gradient(90deg, transparent 0%, rgba(45,122,255,0.4) 50%, transparent 100%);
    }

    /* ═══ GLOW BUTTON ═══ */
    .btn-primary {
      @apply inline-flex items-center gap-2 px-6 py-3 rounded-lg text-sm font-semibold transition-all duration-200;
      @apply bg-cochid-electric text-white;
      @apply hover:bg-cochid-electric-hover hover:shadow-[0_4px_20px_rgba(45,122,255,0.4)] active:scale-[0.97];
    }
    .btn-secondary {
      @apply inline-flex items-center gap-2 px-6 py-3 rounded-lg text-sm font-semibold transition-all duration-200;
      @apply border border-gray-300 text-gray-700 hover:border-cochid-electric/50 hover:text-cochid-electric active:scale-[0.97];
    }
    .dark .btn-secondary {
      @apply border-cochid-surface-border text-gray-300 hover:border-cochid-electric/50 hover:text-cochid-electric;
    }

    /* ═══ TAG / PILL ═══ */
    .tag {
      @apply inline-flex items-center gap-1.5 text-xs font-mono font-medium px-3 py-1 rounded-full;
      @apply border border-cochid-electric/20 text-cochid-electric bg-cochid-glow;
    }
    .tag-cyan {
      @apply border-cochid-cyan/20 text-cochid-cyan bg-cochid-glow-cyan;
    }
    .tag-amber {
      @apply border-amber-400/20 text-amber-500 bg-amber-500/5;
    }

    /* ═══ LINK ARROW ═══ */
    .link-arrow { @apply inline-flex items-center gap-1 text-sm font-semibold transition-colors; }
    .link-arrow svg { @apply w-4 h-4 transition-transform; }
    .link-arrow:hover svg { @apply translate-x-1; }

    /* ═══ TIMELINE ═══ */
    .cochid-timeline { @apply relative pl-8; }
    .cochid-timeline::before {
      content: '';
      @apply absolute left-[9px] top-2 bottom-2 w-[2px];
      background: linear-gradient(180deg, #2d7aff 0%, #00d4aa 100%);
      opacity: 0.3;
    }
    .cochid-timeline-item { @apply relative pb-8; }
    .cochid-timeline-item:last-child { @apply pb-0; }
    .cochid-timeline-item::before {
      content: '';
      @apply absolute -left-[23px] top-[6px] w-3 h-3 rounded-full bg-cochid-electric;
      box-shadow: 0 0 0 4px rgba(45,122,255,0.15), 0 0 12px rgba(45,122,255,0.2);
    }

    /* ═══ DOT PATTERN ═══ */
    .dot-pattern {
      background-image: radial-gradient(rgba(45,122,255,0.08) 1px, transparent 1px);
      background-size: 24px 24px;
    }
    .dark .dot-pattern {
      background-image: radial-gradient(rgba(45,122,255,0.12) 1px, transparent 1px);
    }

    /* ═══ NOISE TEXTURE ═══ */
    .noise::after {
      content: '';
      position: absolute;
      inset: 0;
      opacity: 0.015;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
      pointer-events: none;
    }
    .dark .noise::after { opacity: 0.03; }
  </style>

  {% block head_extra %}{% endblock %}
</head>
<body class="bg-light-bg dark:bg-cochid-navy text-light-ink dark:text-gray-100 antialiased">

  <!-- ═══ NAV ═══ -->
  <nav class="sticky top-0 z-50 backdrop-blur-xl bg-white/80 dark:bg-cochid-navy/80 border-b border-gray-200/50 dark:border-cochid-surface-border">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 h-16 flex items-center justify-between">

      <!-- Logo -->
      <a href="/" class="flex items-center gap-2.5 no-underline group">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" class="transition-transform group-hover:scale-110">
          <circle cx="8" cy="16" r="3.5" fill="#2d7aff" opacity="0.9"/>
          <circle cx="24" cy="8" r="2.5" fill="#00d4aa" opacity="0.8"/>
          <circle cx="24" cy="24" r="2.5" fill="#2d7aff" opacity="0.7"/>
          <line x1="11" y1="14.5" x2="21.5" y2="9" stroke="#2d7aff" stroke-width="1.5" opacity="0.4" stroke-dasharray="3 2">
            <animate attributeName="stroke-dashoffset" from="0" to="-20" dur="8s" repeatCount="indefinite"/>
          </line>
          <line x1="11" y1="17.5" x2="21.5" y2="23" stroke="#00d4aa" stroke-width="1.5" opacity="0.4" stroke-dasharray="3 2">
            <animate attributeName="stroke-dashoffset" from="0" to="-20" dur="6s" repeatCount="indefinite"/>
          </line>
          <line x1="24" y1="11" x2="24" y2="21" stroke="#2d7aff" stroke-width="1" opacity="0.25"/>
        </svg>
        <span class="font-display font-bold tracking-wide text-base text-light-ink dark:text-white">COCHID</span>
      </a>

      <div class="flex items-center gap-1">
        <!-- Desktop nav -->
        <div class="hidden sm:flex items-center gap-0.5">
          <a href="/" class="text-sm px-3 py-1.5 rounded-lg transition-all no-underline {% if nav_page == 'inicio' %}text-cochid-electric bg-cochid-glow font-medium{% else %}text-light-muted dark:text-gray-400 hover:text-light-ink dark:hover:text-white hover:bg-gray-100 dark:hover:bg-cochid-surface{% endif %}">Inicio</a>
          <a href="/servicios" class="text-sm px-3 py-1.5 rounded-lg transition-all no-underline {% if nav_page == 'servicios' %}text-cochid-electric bg-cochid-glow font-medium{% else %}text-light-muted dark:text-gray-400 hover:text-light-ink dark:hover:text-white hover:bg-gray-100 dark:hover:bg-cochid-surface{% endif %}">Servicios</a>
          <a href="/nosotros" class="text-sm px-3 py-1.5 rounded-lg transition-all no-underline {% if nav_page == 'nosotros' %}text-cochid-electric bg-cochid-glow font-medium{% else %}text-light-muted dark:text-gray-400 hover:text-light-ink dark:hover:text-white hover:bg-gray-100 dark:hover:bg-cochid-surface{% endif %}">Nosotros</a>
          <a href="/contacto" class="text-sm px-3 py-1.5 rounded-lg transition-all no-underline {% if nav_page == 'contacto' %}text-cochid-electric bg-cochid-glow font-medium{% else %}text-light-muted dark:text-gray-400 hover:text-light-ink dark:hover:text-white hover:bg-gray-100 dark:hover:bg-cochid-surface{% endif %}">Contacto</a>
        </div>

        <!-- Theme toggle -->
        <button id="themeToggle" class="ml-2 w-8 h-8 flex items-center justify-center rounded-lg border border-gray-200 dark:border-cochid-surface-border hover:bg-gray-100 dark:hover:bg-cochid-surface hover:scale-110 active:scale-95 transition-all cursor-pointer" aria-label="Cambiar tema">
          <svg class="w-4 h-4 dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
          <svg class="w-4 h-4 hidden dark:block text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5" stroke-width="2"/><path stroke-linecap="round" stroke-width="2" d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
        </button>

        <!-- Mobile hamburger -->
        <button id="menuToggle" class="sm:hidden ml-1 w-8 h-8 flex items-center justify-center rounded-lg border border-gray-200 dark:border-cochid-surface-border hover:bg-gray-100 dark:hover:bg-cochid-surface active:scale-95 transition-all cursor-pointer" aria-label="Menú">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
        </button>
      </div>
    </div>

    <!-- Mobile menu -->
    <div id="mobileMenu" class="hidden sm:hidden border-t border-gray-200/50 dark:border-cochid-surface-border bg-white/95 dark:bg-cochid-navy/95 backdrop-blur-xl">
      <div class="max-w-6xl mx-auto px-4 py-3 flex flex-col gap-1">
        <a href="/" class="text-sm px-3 py-2.5 rounded-lg transition-all no-underline {% if nav_page == 'inicio' %}text-cochid-electric bg-cochid-glow font-medium{% else %}text-light-muted dark:text-gray-400 hover:text-light-ink dark:hover:text-white hover:bg-gray-100 dark:hover:bg-cochid-surface{% endif %}">Inicio</a>
        <a href="/servicios" class="text-sm px-3 py-2.5 rounded-lg transition-all no-underline {% if nav_page == 'servicios' %}text-cochid-electric bg-cochid-glow font-medium{% else %}text-light-muted dark:text-gray-400 hover:text-light-ink dark:hover:text-white hover:bg-gray-100 dark:hover:bg-cochid-surface{% endif %}">Servicios</a>
        <a href="/nosotros" class="text-sm px-3 py-2.5 rounded-lg transition-all no-underline {% if nav_page == 'nosotros' %}text-cochid-electric bg-cochid-glow font-medium{% else %}text-light-muted dark:text-gray-400 hover:text-light-ink dark:hover:text-white hover:bg-gray-100 dark:hover:bg-cochid-surface{% endif %}">Nosotros</a>
        <a href="/contacto" class="text-sm px-3 py-2.5 rounded-lg transition-all no-underline {% if nav_page == 'contacto' %}text-cochid-electric bg-cochid-glow font-medium{% else %}text-light-muted dark:text-gray-400 hover:text-light-ink dark:hover:text-white hover:bg-gray-100 dark:hover:bg-cochid-surface{% endif %}">Contacto</a>
      </div>
    </div>
  </nav>

  {% block body %}{% endblock %}

  <!-- ═══ FOOTER ═══ -->
  <footer class="relative border-t border-gray-200/50 dark:border-cochid-surface-border pt-12 pb-8">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <div class="grid grid-cols-1 md:grid-cols-[2fr_1fr_1fr] gap-10 mb-10">
        <div>
          <a href="/" class="flex items-center gap-2.5 no-underline mb-3">
            <svg width="28" height="28" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="8" cy="16" r="3.5" fill="#2d7aff" opacity="0.9"/>
              <circle cx="24" cy="8" r="2.5" fill="#00d4aa" opacity="0.8"/>
              <circle cx="24" cy="24" r="2.5" fill="#2d7aff" opacity="0.7"/>
              <line x1="11" y1="14.5" x2="21.5" y2="9" stroke="#2d7aff" stroke-width="1.5" opacity="0.3"/>
              <line x1="11" y1="17.5" x2="21.5" y2="23" stroke="#00d4aa" stroke-width="1.5" opacity="0.3"/>
            </svg>
            <span class="font-display font-bold tracking-wide text-sm">COCHID</span>
          </a>
          <p class="text-sm text-light-muted dark:text-gray-400 leading-relaxed max-w-sm mb-4">Corporación Chilena de Inteligencia de Datos. Construimos plataformas de datos que funcionan.</p>
          <!-- Círculo de Santiago association -->
          <a href="https://circulodesantiago.cl" target="_blank" class="inline-flex items-center gap-2 text-xs text-light-muted dark:text-gray-500 hover:text-light-ink dark:hover:text-gray-300 transition-colors group">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" class="flex-shrink-0 opacity-50 group-hover:opacity-80 transition-opacity">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            </svg>
            <span>Empresa asociada al <strong class="font-medium">Círculo de Santiago</strong></span>
          </a>
        </div>
        <div>
          <h4 class="text-xs uppercase tracking-wider font-semibold mb-4 text-light-ink dark:text-white">Plataformas</h4>
          <ul class="space-y-2.5 text-sm text-light-muted dark:text-gray-400">
            <li><a href="https://datos.illanes00.cl" target="_blank" class="hover:text-cochid-electric transition-colors">datos.illanes00.cl</a></li>
            <li><a href="https://periodismo2.cl" target="_blank" class="hover:text-cochid-electric transition-colors">periodismo2.cl</a></li>
            <li><a href="https://indieweb.cl" target="_blank" class="hover:text-cochid-electric transition-colors">indieweb.cl</a></li>
            <li><a href="https://situacion.cl" target="_blank" class="hover:text-cochid-electric transition-colors">situacion.cl</a></li>
            <li><a href="https://discursos.illanes00.cl" target="_blank" class="hover:text-cochid-electric transition-colors">discursos.illanes00.cl</a></li>
          </ul>
        </div>
        <div>
          <h4 class="text-xs uppercase tracking-wider font-semibold mb-4 text-light-ink dark:text-white">Contacto</h4>
          <ul class="space-y-2.5 text-sm text-light-muted dark:text-gray-400">
            <li><a href="mailto:contacto@cochid.cl" class="hover:text-cochid-electric transition-colors">contacto@cochid.cl</a></li>
            <li>Santiago, Chile</li>
            <li><a href="/contacto" class="hover:text-cochid-electric transition-colors">Formulario de contacto</a></li>
          </ul>
        </div>
      </div>
      <div class="section-divider mb-4"></div>
      <div class="flex flex-col sm:flex-row items-center justify-between gap-3 text-xs text-light-muted dark:text-gray-500">
        <span>&copy; 2025–2026 COCHID &middot; Corporación Chilena de Inteligencia de Datos</span>
        <a href="https://circulodesantiago.cl" target="_blank" class="inline-flex items-center gap-1.5 hover:text-light-ink dark:hover:text-gray-300 transition-colors">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" class="opacity-40">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
          </svg>
          Círculo de Santiago
        </a>
      </div>
    </div>
  </footer>

  <!-- Dark mode toggle -->
  <script>
    (function() {
      var btn = document.getElementById('themeToggle');
      var current = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      function apply(mode) {
        current = mode;
        localStorage.setItem('theme', mode);
        document.documentElement.classList.toggle('dark', mode === 'dark');
      }
      apply(current);
      btn.addEventListener('click', function() {
        apply(current === 'dark' ? 'light' : 'dark');
      });
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
        if (!localStorage.getItem('theme')) apply(e.matches ? 'dark' : 'light');
      });
    })();
  </script>

  <!-- Mobile menu toggle -->
  <script>
    (function() {
      var toggle = document.getElementById('menuToggle');
      var menu = document.getElementById('mobileMenu');
      if (toggle && menu) {
        toggle.addEventListener('click', function() { menu.classList.toggle('hidden'); });
      }
    })();
  </script>

  <!-- Scroll reveal -->
  <script>
    (function() {
      var els = document.querySelectorAll('.reveal');
      if (!els.length) return;
      var obs = new IntersectionObserver(function(entries) {
        entries.forEach(function(e) {
          if (e.isIntersecting) { e.target.classList.add('visible'); obs.unobserve(e.target); }
        });
      }, { threshold: 0.08, rootMargin: '0px 0px -40px 0px' });
      els.forEach(function(el) { obs.observe(el); });
    })();
  </script>

  {% block scripts_extra %}{% endblock %}
</body>
</html>
