{% extends "base.html" %}

{% block title %}Servicios — COCHID{% endblock %}
{% block meta_description %}Plataformas y servicios de inteligencia de datos de COCHID: datos abiertos, inteligencia periodística, observatorio electoral, hosting ciudadano.{% endblock %}

{% block body %}

<!-- ═══ HERO ═══ -->
<section class="relative py-16 md:py-20 network-bg overflow-hidden">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 relative">
    <span class="tag mb-4 animate-fade-in-up">Servicios</span>
    <h1 class="text-4xl sm:text-5xl font-bold mb-3 animate-fade-in-up-d1">Lo que construimos</h1>
    <p class="text-lg text-light-muted dark:text-gray-400 max-w-2xl animate-fade-in-up-d2">Tres líneas de trabajo. Cada una con sus propios servicios systemd, bases de datos y APIs en producción.</p>
  </div>
</section>

<div class="section-divider"></div>

<!-- ═══ LÍNEA 1: PLATAFORMAS DE DATOS ═══ -->
<section class="py-20 md:py-28 relative" id="plataformas">
  <div class="max-w-6xl mx-auto px-4 sm:px-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 lg:gap-16">
      <div class="reveal">
        <div class="w-14 h-14 rounded-xl bg-cochid-glow border border-cochid-electric/20 flex items-center justify-center mb-6">
          <svg class="w-7 h-7 text-cochid-electric" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"/>
          </svg>
        </div>
        <span class="tag mb-4">Línea 01</span>
        <h2 class="text-3xl sm:text-4xl font-bold mb-4">Plataformas de Datos</h2>
        <p class="text-light-muted dark:text-gray-400 leading-relaxed mb-6">Construimos portales de datos completos — desde la ingesta de fuentes brutas hasta la API pública que expone datos limpios, normalizados y documentados. Arquitectura bronze/silver/gold. La cañería de datos que Chile necesita.</p>

        <h4 class="font-semibold text-sm mb-5 text-light-ink dark:text-white">Producto estrella</h4>
        <div class="glass-card p-5 mb-6 border-l-2 border-l-cochid-electric">
          <div class="flex items-center gap-2 mb-2">
            <h4 class="font-bold">datos.illanes00.cl</h4>
            <a href="https://datos.illanes00.cl" target="_blank" class="text-cochid-electric hover:text-cochid-electric-hover">
              <svg class="w-3.5 h-3.5" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
            </a>
          </div>
          <p class="text-sm text-light-muted dark:text-gray-400 leading-relaxed">El warehouse de datos públicos chilenos más completo: SERVEL, Carabineros, PDI, Fiscalía, CEP, BCCh, DIPRES, INE, DTPM, MINVU y más. API REST abierta, catálogo con permalinks, explorador web con descarga CSV/JSON.</p>
        </div>

        <h4 class="font-semibold text-sm mb-4 text-light-ink dark:text-white">Endpoints reales</h4>
        <div class="space-y-3">
          <div class="rounded-lg bg-light-surface-alt/50 dark:bg-cochid-navy/60 border border-gray-100 dark:border-cochid-surface-border p-3">
            <div class="font-mono text-[0.65rem] text-cochid-electric mb-1">GET /api/v1/catalogo</div>
            <p class="text-xs text-light-muted dark:text-gray-500">Lista todos los datasets con metadata, última actualización y formato disponible.</p>
          </div>
          <div class="rounded-lg bg-light-surface-alt/50 dark:bg-cochid-navy/60 border border-gray-100 dark:border-cochid-surface-border p-3">
            <div class="font-mono text-[0.65rem] text-cochid-electric mb-1">GET /api/v1/seguridad/delitos?comuna=santiago&anio=2024</div>
            <p class="text-xs text-light-muted dark:text-gray-500">Delitos por comuna. Fuentes: Carabineros + PDI fusionados y normalizados.</p>
          </div>
          <div class="rounded-lg bg-light-surface-alt/50 dark:bg-cochid-navy/60 border border-gray-100 dark:border-cochid-surface-border p-3">
            <div class="font-mono text-[0.65rem] text-cochid-electric mb-1">GET /api/v1/cep/series?variable=aprobacion_presidente</div>
            <p class="text-xs text-light-muted dark:text-gray-500">Series temporales CEP. 63 olas, 93K+ entrevistas, 1990-2025.</p>
          </div>
          <div class="rounded-lg bg-light-surface-alt/50 dark:bg-cochid-navy/60 border border-gray-100 dark:border-cochid-surface-border p-3">
            <div class="font-mono text-[0.65rem] text-cochid-electric mb-1">GET /api/v1/transporte/subidas?servicio=506&fecha=2024-01-15</div>
            <p class="text-xs text-light-muted dark:text-gray-500">Subidas al transporte por servicio y fecha. DTPM, datos GTFS.</p>
          </div>
        </div>
      </div>

      <div class="space-y-4 reveal" style="transition-delay:0.15s">
        <!-- Data pipeline visualization -->
        <div class="glass-card overflow-hidden">
          <div class="px-5 py-3 border-b border-gray-200/50 dark:border-cochid-surface-border flex items-center gap-2">
            <div class="flex gap-1">
              <div class="w-2 h-2 rounded-full bg-red-400/70"></div>
              <div class="w-2 h-2 rounded-full bg-amber-400/70"></div>
              <div class="w-2 h-2 rounded-full bg-emerald-400/70"></div>
            </div>
            <span class="font-mono text-[0.65rem] text-light-muted dark:text-gray-500 ml-1">data_pipeline.flow</span>
          </div>
          <div class="p-4">
            <svg viewBox="0 0 380 200" class="w-full" aria-hidden="true" style="min-height:160px">
              <!-- Bronze layer -->
              <rect x="10" y="20" width="80" height="160" rx="6" fill="#2d7aff" opacity="0.05" stroke="#2d7aff" stroke-width="0.8" opacity="0.2"/>
              <text x="50" y="14" text-anchor="middle" fill="#2d7aff" font-size="7" font-family="monospace" font-weight="bold" opacity="0.6">BRONZE</text>
              <!-- Source nodes -->
              <rect x="18" y="30" width="64" height="15" rx="3" fill="#2d7aff" opacity="0.12"/><text x="50" y="41" text-anchor="middle" fill="#2d7aff" font-size="6" font-family="monospace">Carabineros</text>
              <rect x="18" y="50" width="64" height="15" rx="3" fill="#2d7aff" opacity="0.12"/><text x="50" y="61" text-anchor="middle" fill="#2d7aff" font-size="6" font-family="monospace">SERVEL</text>
              <rect x="18" y="70" width="64" height="15" rx="3" fill="#00d4aa" opacity="0.12"/><text x="50" y="81" text-anchor="middle" fill="#00d4aa" font-size="6" font-family="monospace">CEP</text>
              <rect x="18" y="90" width="64" height="15" rx="3" fill="#00d4aa" opacity="0.12"/><text x="50" y="101" text-anchor="middle" fill="#00d4aa" font-size="6" font-family="monospace">BCCh</text>
              <rect x="18" y="110" width="64" height="15" rx="3" fill="#f59e0b" opacity="0.1"/><text x="50" y="121" text-anchor="middle" fill="#f59e0b" font-size="6" font-family="monospace">DTPM</text>
              <rect x="18" y="130" width="64" height="15" rx="3" fill="#f59e0b" opacity="0.1"/><text x="50" y="141" text-anchor="middle" fill="#f59e0b" font-size="6" font-family="monospace">Ley Chile</text>
              <rect x="18" y="150" width="64" height="15" rx="3" fill="#2d7aff" opacity="0.08"/><text x="50" y="161" text-anchor="middle" fill="#64748b" font-size="6" font-family="monospace">+14 más</text>

              <!-- Silver layer -->
              <rect x="150" y="20" width="80" height="160" rx="6" fill="#00d4aa" opacity="0.05" stroke="#00d4aa" stroke-width="0.8" opacity="0.2"/>
              <text x="190" y="14" text-anchor="middle" fill="#00d4aa" font-size="7" font-family="monospace" font-weight="bold" opacity="0.6">SILVER</text>
              <rect x="158" y="38" width="64" height="15" rx="3" fill="#00d4aa" opacity="0.1"/><text x="190" y="49" text-anchor="middle" fill="#00d4aa" font-size="6" font-family="monospace">Limpieza</text>
              <rect x="158" y="60" width="64" height="15" rx="3" fill="#00d4aa" opacity="0.1"/><text x="190" y="71" text-anchor="middle" fill="#00d4aa" font-size="6" font-family="monospace">Tipado</text>
              <rect x="158" y="82" width="64" height="15" rx="3" fill="#00d4aa" opacity="0.1"/><text x="190" y="93" text-anchor="middle" fill="#00d4aa" font-size="6" font-family="monospace">Deduplicar</text>
              <rect x="158" y="104" width="64" height="15" rx="3" fill="#00d4aa" opacity="0.1"/><text x="190" y="115" text-anchor="middle" fill="#00d4aa" font-size="6" font-family="monospace">Validar</text>
              <rect x="158" y="126" width="64" height="15" rx="3" fill="#00d4aa" opacity="0.1"/><text x="190" y="137" text-anchor="middle" fill="#00d4aa" font-size="6" font-family="monospace">Normalizar</text>
              <rect x="158" y="148" width="64" height="15" rx="3" fill="#00d4aa" opacity="0.1"/><text x="190" y="159" text-anchor="middle" fill="#00d4aa" font-size="6" font-family="monospace">Enriquecer</text>

              <!-- Gold layer -->
              <rect x="290" y="20" width="80" height="160" rx="6" fill="#f59e0b" opacity="0.05" stroke="#f59e0b" stroke-width="0.8" opacity="0.2"/>
              <text x="330" y="14" text-anchor="middle" fill="#f59e0b" font-size="7" font-family="monospace" font-weight="bold" opacity="0.6">GOLD</text>
              <rect x="298" y="42" width="64" height="15" rx="3" fill="#f59e0b" opacity="0.1"/><text x="330" y="53" text-anchor="middle" fill="#f59e0b" font-size="6" font-family="monospace">REST API</text>
              <rect x="298" y="64" width="64" height="15" rx="3" fill="#f59e0b" opacity="0.1"/><text x="330" y="75" text-anchor="middle" fill="#f59e0b" font-size="6" font-family="monospace">Catálogo</text>
              <rect x="298" y="86" width="64" height="15" rx="3" fill="#f59e0b" opacity="0.1"/><text x="330" y="97" text-anchor="middle" fill="#f59e0b" font-size="6" font-family="monospace">CSV/JSON</text>
              <rect x="298" y="108" width="64" height="15" rx="3" fill="#f59e0b" opacity="0.1"/><text x="330" y="119" text-anchor="middle" fill="#f59e0b" font-size="6" font-family="monospace">Permalinks</text>
              <rect x="298" y="130" width="64" height="15" rx="3" fill="#f59e0b" opacity="0.1"/><text x="330" y="141" text-anchor="middle" fill="#f59e0b" font-size="6" font-family="monospace">Agregación</text>
              <rect x="298" y="152" width="64" height="15" rx="3" fill="#f59e0b" opacity="0.1"/><text x="330" y="163" text-anchor="middle" fill="#f59e0b" font-size="6" font-family="monospace">OpenAPI</text>

              <!-- Flow arrows bronze→silver -->
              <line x1="90" y1="60" x2="150" y2="60" stroke="#2d7aff" stroke-width="0.8" opacity="0.2" stroke-dasharray="3 2"><animate attributeName="stroke-dashoffset" from="0" to="-10" dur="2s" repeatCount="indefinite"/></line>
              <line x1="90" y1="100" x2="150" y2="100" stroke="#00d4aa" stroke-width="0.8" opacity="0.2" stroke-dasharray="3 2"><animate attributeName="stroke-dashoffset" from="0" to="-10" dur="2.5s" repeatCount="indefinite"/></line>
              <line x1="90" y1="140" x2="150" y2="140" stroke="#f59e0b" stroke-width="0.8" opacity="0.15" stroke-dasharray="3 2"><animate attributeName="stroke-dashoffset" from="0" to="-10" dur="3s" repeatCount="indefinite"/></line>
              <!-- Flow arrows silver→gold -->
              <line x1="230" y1="60" x2="290" y2="60" stroke="#00d4aa" stroke-width="0.8" opacity="0.2" stroke-dasharray="3 2"><animate attributeName="stroke-dashoffset" from="0" to="-10" dur="2s" repeatCount="indefinite"/></line>
              <line x1="230" y1="100" x2="290" y2="100" stroke="#00d4aa" stroke-width="0.8" opacity="0.2" stroke-dasharray="3 2"><animate attributeName="stroke-dashoffset" from="0" to="-10" dur="2.5s" repeatCount="indefinite"/></line>
              <line x1="230" y1="140" x2="290" y2="140" stroke="#f59e0b" stroke-width="0.8" opacity="0.15" stroke-dasharray="3 2"><animate attributeName="stroke-dashoffset" from="0" to="-10" dur="3s" repeatCount="indefinite"/></line>

              <!-- Particles -->
              <circle r="1.5" fill="#2d7aff" opacity="0.7"><animateMotion dur="2s" repeatCount="indefinite" path="M90,60 L150,60"/></circle>
              <circle r="1.5" fill="#00d4aa" opacity="0.7"><animateMotion dur="2.2s" repeatCount="indefinite" path="M230,100 L290,100"/></circle>
              <circle r="1" fill="#f59e0b" opacity="0.5"><animateMotion dur="2.8s" repeatCount="indefinite" path="M90,140 L290,140"/></circle>
            </svg>
          </div>
        </div>

        <div class="glass-card overflow-hidden">
          <div class="px-5 py-3.5 border-b border-gray-200/50 dark:border-cochid-surface-border">
            <strong class="text-sm">Stack</strong>
          </div>
          <div class="px-5 py-4 flex flex-wrap gap-1.5">
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">FastAPI</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">PostgreSQL</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">PgBouncer</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Python</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Parquet</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="section-divider max-w-6xl mx-auto"></div>

<!-- ═══ LÍNEA 2: INTELIGENCIA PERIODÍSTICA ═══ -->
<section class="py-20 md:py-28 relative dot-pattern" id="periodismo">
  <div class="max-w-6xl mx-auto px-4 sm:px-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 lg:gap-16">
      <div class="reveal">
        <div class="w-14 h-14 rounded-xl bg-cochid-glow-cyan border border-cochid-cyan/20 flex items-center justify-center mb-6">
          <svg class="w-7 h-7 text-cochid-cyan" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/>
          </svg>
        </div>
        <span class="tag tag-cyan mb-4">Línea 02</span>
        <h2 class="text-3xl sm:text-4xl font-bold mb-4">Inteligencia Periodística</h2>
        <p class="text-light-muted dark:text-gray-400 leading-relaxed mb-6">Plataforma completa de agregación y procesamiento de noticias. Más de 100 fuentes internacionales y chilenas procesadas con NLP: clasificación, deduplicación SimHash, scoring, detección de tendencias y publicación automática.</p>

        <h4 class="font-semibold text-sm mb-5 text-light-ink dark:text-white">Producto estrella</h4>
        <div class="glass-card p-5 mb-6 border-l-2 border-l-cochid-cyan">
          <div class="flex items-center gap-2 mb-2">
            <h4 class="font-bold">periodismo2.cl</h4>
            <a href="https://periodismo2.cl" target="_blank" class="text-cochid-cyan hover:text-cochid-cyan-hover">
              <svg class="w-3.5 h-3.5" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
            </a>
          </div>
          <p class="text-sm text-light-muted dark:text-gray-400 leading-relaxed">Ecosistema de 4 servicios: sitio público (Flask), API (FastAPI), admin (FastAPI) y frontend (Next.js). Workers Celery procesan ingesta, NLP, publicación y newsletters 24/7.</p>
        </div>

        <h4 class="font-semibold text-sm mb-4 text-light-ink dark:text-white">Pipeline NLP — 6 etapas</h4>
        <div class="cochid-timeline">
          <div class="cochid-timeline-item">
            <strong class="block">Ingesta masiva</strong>
            <p class="text-sm text-light-muted dark:text-gray-400 mt-1">100+ feeds RSS/Atom. Celery beat cada 15 min.</p>
          </div>
          <div class="cochid-timeline-item">
            <strong class="block">Deduplicación SimHash</strong>
            <p class="text-sm text-light-muted dark:text-gray-400 mt-1">64-bit fingerprint por artículo. Threshold configurable por fuente.</p>
          </div>
          <div class="cochid-timeline-item">
            <strong class="block">Clasificación + Scoring</strong>
            <p class="text-sm text-light-muted dark:text-gray-400 mt-1">Categorías temáticas, relevancia ponderada por fuente y velocidad.</p>
          </div>
          <div class="cochid-timeline-item">
            <strong class="block">Trending topics</strong>
            <p class="text-sm text-light-muted dark:text-gray-400 mt-1">Frecuencia × velocidad × diversidad de fuentes. Algoritmo propio.</p>
          </div>
        </div>
      </div>

      <div class="space-y-4 reveal" style="transition-delay:0.15s">
        <!-- NLP Pipeline flow diagram -->
        <div class="glass-card overflow-hidden">
          <div class="px-5 py-3 border-b border-gray-200/50 dark:border-cochid-surface-border flex items-center gap-2">
            <div class="flex gap-1">
              <div class="w-2 h-2 rounded-full bg-red-400/70"></div>
              <div class="w-2 h-2 rounded-full bg-amber-400/70"></div>
              <div class="w-2 h-2 rounded-full bg-emerald-400/70"></div>
            </div>
            <span class="font-mono text-[0.65rem] text-light-muted dark:text-gray-500 ml-1">nlp_pipeline.flow</span>
          </div>
          <div class="p-4">
            <svg viewBox="0 0 380 220" class="w-full" aria-hidden="true" style="min-height:180px">
              <!-- RSS Source cluster -->
              <rect x="8" y="10" width="55" height="16" rx="3" fill="#00d4aa" opacity="0.1" stroke="#00d4aa" stroke-width="0.6"/><text x="36" y="21" text-anchor="middle" fill="#00d4aa" font-size="5.5" font-family="monospace">BBC</text>
              <rect x="8" y="30" width="55" height="16" rx="3" fill="#00d4aa" opacity="0.1" stroke="#00d4aa" stroke-width="0.6"/><text x="36" y="41" text-anchor="middle" fill="#00d4aa" font-size="5.5" font-family="monospace">La Tercera</text>
              <rect x="8" y="50" width="55" height="16" rx="3" fill="#00d4aa" opacity="0.1" stroke="#00d4aa" stroke-width="0.6"/><text x="36" y="61" text-anchor="middle" fill="#00d4aa" font-size="5.5" font-family="monospace">Cooperativa</text>
              <rect x="8" y="70" width="55" height="16" rx="3" fill="#00d4aa" opacity="0.08" stroke="#00d4aa" stroke-width="0.5"/><text x="36" y="81" text-anchor="middle" fill="#64748b" font-size="5.5" font-family="monospace">+97 más</text>

              <!-- Ingesta -->
              <rect x="85" y="25" width="60" height="50" rx="6" fill="#00d4aa" opacity="0.06" stroke="#00d4aa" stroke-width="0.8"/>
              <text x="115" y="48" text-anchor="middle" fill="#00d4aa" font-size="6" font-family="monospace" font-weight="bold">INGESTA</text>
              <text x="115" y="58" text-anchor="middle" fill="#64748b" font-size="5" font-family="monospace">RSS/Atom</text>
              <text x="115" y="67" text-anchor="middle" fill="#64748b" font-size="5" font-family="monospace">Scraper</text>

              <!-- NLP Processing -->
              <rect x="170" y="10" width="70" height="80" rx="6" fill="#2d7aff" opacity="0.06" stroke="#2d7aff" stroke-width="0.8"/>
              <text x="205" y="25" text-anchor="middle" fill="#2d7aff" font-size="6" font-family="monospace" font-weight="bold">NLP</text>
              <text x="205" y="38" text-anchor="middle" fill="#64748b" font-size="5" font-family="monospace">SimHash</text>
              <text x="205" y="48" text-anchor="middle" fill="#64748b" font-size="5" font-family="monospace">Classify</text>
              <text x="205" y="58" text-anchor="middle" fill="#64748b" font-size="5" font-family="monospace">Score</text>
              <text x="205" y="68" text-anchor="middle" fill="#64748b" font-size="5" font-family="monospace">Summarize</text>
              <text x="205" y="78" text-anchor="middle" fill="#64748b" font-size="5" font-family="monospace">Trending</text>

              <!-- Output -->
              <rect x="265" y="10" width="55" height="26" rx="4" fill="#f59e0b" opacity="0.08" stroke="#f59e0b" stroke-width="0.6"/><text x="293" y="27" text-anchor="middle" fill="#f59e0b" font-size="5.5" font-family="monospace">Web App</text>
              <rect x="265" y="42" width="55" height="26" rx="4" fill="#f59e0b" opacity="0.08" stroke="#f59e0b" stroke-width="0.6"/><text x="293" y="59" text-anchor="middle" fill="#f59e0b" font-size="5.5" font-family="monospace">Newsletter</text>
              <rect x="265" y="74" width="55" height="26" rx="4" fill="#f59e0b" opacity="0.08" stroke="#f59e0b" stroke-width="0.6"/><text x="293" y="91" text-anchor="middle" fill="#f59e0b" font-size="5.5" font-family="monospace">REST API</text>

              <!-- Flow arrows -->
              <line x1="63" y1="50" x2="85" y2="50" stroke="#00d4aa" stroke-width="0.8" opacity="0.3" stroke-dasharray="2 2"><animate attributeName="stroke-dashoffset" from="0" to="-8" dur="1.5s" repeatCount="indefinite"/></line>
              <line x1="145" y1="50" x2="170" y2="50" stroke="#2d7aff" stroke-width="0.8" opacity="0.3" stroke-dasharray="2 2"><animate attributeName="stroke-dashoffset" from="0" to="-8" dur="2s" repeatCount="indefinite"/></line>
              <line x1="240" y1="40" x2="265" y2="23" stroke="#f59e0b" stroke-width="0.6" opacity="0.2" stroke-dasharray="2 2"><animate attributeName="stroke-dashoffset" from="0" to="-8" dur="2s" repeatCount="indefinite"/></line>
              <line x1="240" y1="50" x2="265" y2="55" stroke="#f59e0b" stroke-width="0.6" opacity="0.2" stroke-dasharray="2 2"><animate attributeName="stroke-dashoffset" from="0" to="-8" dur="2.5s" repeatCount="indefinite"/></line>
              <line x1="240" y1="60" x2="265" y2="87" stroke="#f59e0b" stroke-width="0.6" opacity="0.2" stroke-dasharray="2 2"><animate attributeName="stroke-dashoffset" from="0" to="-8" dur="3s" repeatCount="indefinite"/></line>

              <!-- Particles -->
              <circle r="1.5" fill="#00d4aa" opacity="0.7"><animateMotion dur="1.5s" repeatCount="indefinite" path="M63,50 L85,50"/></circle>
              <circle r="1.5" fill="#2d7aff" opacity="0.7"><animateMotion dur="2s" repeatCount="indefinite" path="M145,50 L170,50"/></circle>

              <!-- Stats bar below -->
              <line x1="8" y1="110" x2="370" y2="110" stroke="#64748b" stroke-width="0.3" opacity="0.2"/>
              <text x="8" y="128" fill="#64748b" font-size="5.5" font-family="monospace" opacity="0.5">THROUGHPUT 24H</text>
              <!-- Bar chart of processed articles -->
              <rect x="8" y="138" width="52" height="8" rx="2" fill="#00d4aa" opacity="0.3"/><text x="66" y="146" fill="#00d4aa" font-size="5.5" font-family="monospace">BBC 520</text>
              <rect x="8" y="150" width="44" height="8" rx="2" fill="#00d4aa" opacity="0.25"/><text x="58" y="158" fill="#00d4aa" font-size="5.5" font-family="monospace">Cooperativa 430</text>
              <rect x="8" y="162" width="38" height="8" rx="2" fill="#2d7aff" opacity="0.25"/><text x="52" y="170" fill="#2d7aff" font-size="5.5" font-family="monospace">La Tercera 380</text>
              <rect x="8" y="174" width="32" height="8" rx="2" fill="#2d7aff" opacity="0.2"/><text x="46" y="182" fill="#2d7aff" font-size="5.5" font-family="monospace">El País 310</text>
              <rect x="8" y="186" width="26" height="8" rx="2" fill="#f59e0b" opacity="0.2"/><text x="40" y="194" fill="#f59e0b" font-size="5.5" font-family="monospace">NYT 260</text>
              <rect x="8" y="198" width="68" height="8" rx="2" fill="#64748b" opacity="0.1"/><text x="82" y="206" fill="#64748b" font-size="5.5" font-family="monospace">+92 fuentes</text>
            </svg>
          </div>
        </div>

        <div class="glass-card overflow-hidden">
          <div class="px-5 py-3.5 border-b border-gray-200/50 dark:border-cochid-surface-border">
            <strong class="text-sm">Stack</strong>
          </div>
          <div class="px-5 py-4 flex flex-wrap gap-1.5">
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Flask</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">FastAPI</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Celery</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Next.js</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">PostgreSQL</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Redis</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Qdrant</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="section-divider max-w-6xl mx-auto"></div>

<!-- ═══ LÍNEA 3: PRODUCTOS CIUDADANOS ═══ -->
<section class="py-20 md:py-28 relative" id="ciudadano">
  <div class="max-w-6xl mx-auto px-4 sm:px-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 lg:gap-16">
      <div class="reveal">
        <div class="w-14 h-14 rounded-xl bg-amber-500/5 border border-amber-400/20 flex items-center justify-center mb-6">
          <svg class="w-7 h-7 text-amber-500" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
          </svg>
        </div>
        <span class="tag tag-amber mb-4">Línea 03</span>
        <h2 class="text-3xl sm:text-4xl font-bold mb-4">Productos Ciudadanos</h2>
        <p class="text-light-muted dark:text-gray-400 leading-relaxed mb-6">Herramientas y plataformas orientadas al público general y la sociedad civil. Hosting accesible, monitoreo de señales públicas, observatorios electorales — tecnología al servicio de la ciudadanía.</p>

        <div class="space-y-4">
          <div class="glass-card p-5 border-l-2 border-l-amber-400">
            <div class="flex items-center gap-2 mb-2">
              <h4 class="font-bold">indieweb.cl</h4>
              <a href="https://indieweb.cl" target="_blank" class="text-amber-500 hover:text-amber-600">
                <svg class="w-3.5 h-3.5" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
              </a>
            </div>
            <p class="text-sm text-light-muted dark:text-gray-400 leading-relaxed">Hosting donde personas no técnicas construyen apps web con IA. Chat con Claude integrado, deploy automático a subdominios, SSO con Authentik. Democratizar la web.</p>
          </div>

          <div class="glass-card p-5 border-l-2 border-l-cochid-electric">
            <div class="flex items-center gap-2 mb-2">
              <h4 class="font-bold">situacion.cl</h4>
              <a href="https://situacion.cl" target="_blank" class="text-cochid-electric hover:text-cochid-electric-hover">
                <svg class="w-3.5 h-3.5" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
              </a>
            </div>
            <p class="text-sm text-light-muted dark:text-gray-400 leading-relaxed">Monitoreo OSINT de Chile. Detección de anomalías en tráfico de red gubernamental via Cloudflare Radar. Z-score sobre ASN del Estado. Inteligencia de situación abierta.</p>
          </div>

          <div class="glass-card p-5 border-l-2 border-l-cochid-cyan">
            <div class="flex items-center gap-2 mb-2">
              <h4 class="font-bold">discursos.illanes00.cl</h4>
              <a href="https://discursos.illanes00.cl" target="_blank" class="text-cochid-cyan hover:text-cochid-cyan-hover">
                <svg class="w-3.5 h-3.5" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
              </a>
            </div>
            <p class="text-sm text-light-muted dark:text-gray-400 leading-relaxed">Análisis de discursos presidenciales 2018-2025. Corpus completo de Piñera y Boric con búsqueda por palabra clave, gráficos de frecuencia (absoluta y relativa) y marcadores de hitos políticos: estallido social, COVID, plebiscito.</p>
          </div>

          <div class="glass-card p-5 border-l-2 border-l-cochid-cyan">
            <div class="flex items-center gap-2 mb-2">
              <h4 class="font-bold">Observatorio Electoral</h4>
            </div>
            <p class="text-sm text-light-muted dark:text-gray-400 leading-relaxed">Datos SERVEL normalizados, candidatos, resultados históricos, coaliciones. Sistema de forecast con ingesta de encuestas y mercados de predicción.</p>
          </div>
        </div>
      </div>

      <div class="space-y-4 reveal" style="transition-delay:0.15s">
        <div class="glass-card overflow-hidden">
          <div class="px-5 py-3.5 border-b border-gray-200/50 dark:border-cochid-surface-border">
            <strong class="text-sm">Más herramientas del ecosistema</strong>
          </div>
          <div class="divide-y divide-gray-100 dark:divide-cochid-surface-border">
            <div class="px-5 py-3 text-sm flex items-center gap-2"><span class="w-1 h-1 rounded-full bg-cochid-cyan flex-shrink-0"></span><strong class="mr-1">Discursos</strong> — Análisis de discursos presidenciales 2018-2025</div>
            <div class="px-5 py-3 text-sm flex items-center gap-2"><span class="w-1 h-1 rounded-full bg-cochid-electric flex-shrink-0"></span><strong class="mr-1">Lex</strong> — RAG sobre corpus de leyes chilenas</div>
            <div class="px-5 py-3 text-sm flex items-center gap-2"><span class="w-1 h-1 rounded-full bg-cochid-cyan flex-shrink-0"></span><strong class="mr-1">Scribe</strong> — Escritura académica + verificación IA</div>
            <div class="px-5 py-3 text-sm flex items-center gap-2"><span class="w-1 h-1 rounded-full bg-amber-500 flex-shrink-0"></span><strong class="mr-1">Finance</strong> — Polymarket + mercados predictivos</div>
            <div class="px-5 py-3 text-sm flex items-center gap-2"><span class="w-1 h-1 rounded-full bg-cochid-electric flex-shrink-0"></span><strong class="mr-1">Maps</strong> — Geoespacial sobre datos territoriales</div>
            <div class="px-5 py-3 text-sm flex items-center gap-2"><span class="w-1 h-1 rounded-full bg-cochid-cyan flex-shrink-0"></span><strong class="mr-1">Graphs</strong> — Presupuesto funcional COFOG + deflactación</div>
          </div>
        </div>
        <div class="glass-card overflow-hidden">
          <div class="px-5 py-3.5 border-b border-gray-200/50 dark:border-cochid-surface-border">
            <strong class="text-sm">Stack compartido</strong>
          </div>
          <div class="px-5 py-4 flex flex-wrap gap-1.5">
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Python</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Flask</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">FastAPI</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Express.js</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">PostgreSQL</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Caddy</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">systemd</span>
            <span class="text-[0.65rem] font-mono px-2.5 py-1 rounded-md bg-light-surface-alt dark:bg-cochid-navy border border-gray-100 dark:border-cochid-surface-border text-light-muted dark:text-gray-400">Cloudflare</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ═══ CTA ═══ -->
<section class="py-20 md:py-28 relative network-bg">
  <div class="max-w-6xl mx-auto px-4 sm:px-6">
    <div class="relative overflow-hidden rounded-2xl reveal">
      <div class="absolute inset-0 bg-gradient-to-br from-cochid-electric via-blue-600 to-cochid-cyan opacity-90"></div>
      <div class="absolute inset-0 dot-pattern opacity-10"></div>
      <div class="relative p-8 md:p-14 text-center">
        <h2 class="text-2xl sm:text-3xl font-bold text-white mb-4">¿Necesita algo parecido?</h2>
        <p class="text-blue-100 mb-8 max-w-md mx-auto">Construimos plataformas de datos a medida. Desde la ingesta hasta la API documentada.</p>
        <a href="/contacto" class="inline-flex items-center gap-2 px-6 py-3 rounded-lg text-sm font-semibold bg-white text-cochid-electric hover:bg-gray-100 active:scale-[0.97] transition-all shadow-lg">
          Contactar
          <svg class="w-4 h-4" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
        </a>
      </div>
    </div>
  </div>
</section>

{% endblock %}
